(function(){var e={3665:function(e,t,s){"use strict";var r=s(1706),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("h2",{staticClass:"title"},[e._v("クリック位置の雨量をグラフ化！")]),t("weather-map",{on:{"weather-data":e.handleWeatherData}}),t("rain-chart",{staticClass:"chart-display",attrs:{"weather-data":e.currentWeatherData}})],1)},a=[],i=function(){var e=this;e._self._c;return e._m(0)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"map-container"},[t("div",{attrs:{id:"map"}})])}],l=(s(8111),s(1701),s(1278)),c=s.n(l),u=s(417);delete c().Icon.Default.prototype._getIconUrl,c().Icon.Default.mergeOptions({iconRetinaUrl:s(8249),iconUrl:s(7024),shadowUrl:s(1071)});var j,h,d={name:"WeatherMap",data(){return{map:null,debounceTimer:null,currentMarker:null,lastClickTime:null}},mounted(){this.initMap()},methods:{initMap(){this.map=c().map("map").setView([35.682839,139.759455],10),c().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.map.on("click",this.debounceHandleClick)},debounceHandleClick(e){const t=Date.now(),{lat:s,lng:r}=e.latlng;!this.lastClickTime||t-this.lastClickTime>1e3?this.handleWeatherRequest(s,r):(this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>{this.handleWeatherRequest(s,r)}),300)),this.lastClickTime=t},async handleWeatherRequest(e,t){console.log(`クリック地点: 緯度 ${e}, 経度 ${t}`),this.currentMarker&&this.map.removeLayer(this.currentMarker),this.currentMarker=c().marker([e,t]).addTo(this.map);try{const s=await this.getRainAPI(e,t);console.log("API Response Data:",{time:s.time,precipitation:s.precipitation,timeLength:s.time.length,precipitationLength:s.precipitation.length}),this.$emit("weather-data",s)}catch(s){console.error("天気データの取得に失敗しました:",s)}},async getRainAPI(e,t){try{const s={params:{latitude:e,longitude:t,hourly:"precipitation"}},r=await u.A.get("https://api.open-meteo.com/v1/forecast",s);return r.data.hourly}catch(s){throw console.error("APIエラー:",s),s}}},beforeDestroy(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.currentMarker&&this.map.removeLayer(this.currentMarker)}},m=d,p=s(1656),f=(0,p.A)(m,i,o,!1,null,"e268863a",null),b=f.exports,g=s(3331),y={name:"RainChart",extends:g.N1,props:{weatherData:{type:Object,default:null}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1,title:{display:!0,text:"時間ごとの降水量"},scales:{yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"降水量 (mm)"}}],xAxes:[{scaleLabel:{display:!0,labelString:"時間"}}]},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0}}}},watch:{weatherData:{handler(e){if(e){const t=e.time.map((e=>{const t=new Date(e);return`${t.getHours()}:00`}));this.renderChart({labels:t,datasets:[{label:"降水量 (mm)",backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgb(54, 162, 235)",borderWidth:1,data:e.precipitation,fill:!0}]},this.chartOptions)}},immediate:!0}}},k=y,v=(0,p.A)(k,j,h,!1,null,null,null),w=v.exports,z={name:"App",components:{WeatherMap:b,RainChart:w},data(){return{currentWeatherData:null}},methods:{handleWeatherData(e){this.currentWeatherData=e}}},O=z,x=(0,p.A)(O,n,a,!1,null,null,null),T=x.exports;r.Ay.config.productionTip=!1,r.Ay.prototype.$axios=u.A,new r.Ay({render:e=>e(T)}).$mount("#app")},5358:function(e,t,s){var r={"./af":54,"./af.js":54,"./ar":8650,"./ar-dz":3137,"./ar-dz.js":3137,"./ar-kw":9825,"./ar-kw.js":9825,"./ar-ly":4800,"./ar-ly.js":4800,"./ar-ma":7521,"./ar-ma.js":7521,"./ar-ps":1854,"./ar-ps.js":1854,"./ar-sa":9747,"./ar-sa.js":9747,"./ar-tn":6093,"./ar-tn.js":6093,"./ar.js":8650,"./az":1125,"./az.js":1125,"./be":1844,"./be.js":1844,"./bg":4238,"./bg.js":4238,"./bm":5452,"./bm.js":5452,"./bn":9877,"./bn-bd":4728,"./bn-bd.js":4728,"./bn.js":9877,"./bo":9158,"./bo.js":9158,"./br":3601,"./br.js":3601,"./bs":9698,"./bs.js":9698,"./ca":4225,"./ca.js":4225,"./cs":5247,"./cs.js":5247,"./cv":3508,"./cv.js":3508,"./cy":7065,"./cy.js":7065,"./da":3002,"./da.js":3002,"./de":7046,"./de-at":2662,"./de-at.js":2662,"./de-ch":640,"./de-ch.js":640,"./de.js":7046,"./dv":3155,"./dv.js":3155,"./el":9296,"./el.js":9296,"./en-au":9441,"./en-au.js":9441,"./en-ca":2659,"./en-ca.js":2659,"./en-gb":1106,"./en-gb.js":1106,"./en-ie":7625,"./en-ie.js":7625,"./en-il":7794,"./en-il.js":7794,"./en-in":5176,"./en-in.js":5176,"./en-nz":2379,"./en-nz.js":2379,"./en-sg":3625,"./en-sg.js":3625,"./eo":297,"./eo.js":297,"./es":653,"./es-do":763,"./es-do.js":763,"./es-mx":7975,"./es-mx.js":7975,"./es-us":5082,"./es-us.js":5082,"./es.js":653,"./et":8216,"./et.js":8216,"./eu":1375,"./eu.js":1375,"./fa":1132,"./fa.js":1132,"./fi":1460,"./fi.js":1460,"./fil":6074,"./fil.js":6074,"./fo":5602,"./fo.js":5602,"./fr":7957,"./fr-ca":3786,"./fr-ca.js":3786,"./fr-ch":273,"./fr-ch.js":273,"./fr.js":7957,"./fy":4100,"./fy.js":4100,"./ga":1205,"./ga.js":1205,"./gd":4730,"./gd.js":4730,"./gl":5938,"./gl.js":5938,"./gom-deva":2523,"./gom-deva.js":2523,"./gom-latn":9676,"./gom-latn.js":9676,"./gu":8697,"./gu.js":8697,"./he":9426,"./he.js":9426,"./hi":1830,"./hi.js":1830,"./hr":5611,"./hr.js":5611,"./hu":2178,"./hu.js":2178,"./hy-am":3117,"./hy-am.js":3117,"./id":9588,"./id.js":9588,"./is":305,"./is.js":305,"./it":5236,"./it-ch":9854,"./it-ch.js":9854,"./it.js":5236,"./ja":1296,"./ja.js":1296,"./jv":7669,"./jv.js":7669,"./ka":2729,"./ka.js":2729,"./kk":911,"./kk.js":911,"./km":6509,"./km.js":6509,"./kn":5092,"./kn.js":5092,"./ko":2091,"./ko.js":2091,"./ku":2709,"./ku-kmr":9294,"./ku-kmr.js":9294,"./ku.js":2709,"./ky":5329,"./ky.js":5329,"./lb":6255,"./lb.js":6255,"./lo":7084,"./lo.js":7084,"./lt":2013,"./lt.js":2013,"./lv":3419,"./lv.js":3419,"./me":4759,"./me.js":4759,"./mi":4331,"./mi.js":4331,"./mk":618,"./mk.js":618,"./ml":8888,"./ml.js":8888,"./mn":4325,"./mn.js":4325,"./mr":2518,"./mr.js":2518,"./ms":261,"./ms-my":7144,"./ms-my.js":7144,"./ms.js":261,"./mt":8048,"./mt.js":8048,"./my":2539,"./my.js":2539,"./nb":7005,"./nb.js":7005,"./ne":6152,"./ne.js":6152,"./nl":999,"./nl-be":2185,"./nl-be.js":2185,"./nl.js":999,"./nn":2329,"./nn.js":2329,"./oc-lnc":5673,"./oc-lnc.js":5673,"./pa-in":7820,"./pa-in.js":7820,"./pl":9265,"./pl.js":9265,"./pt":9577,"./pt-br":9202,"./pt-br.js":9202,"./pt.js":9577,"./ro":2710,"./ro.js":2710,"./ru":3924,"./ru.js":3924,"./sd":7406,"./sd.js":7406,"./se":8109,"./se.js":8109,"./si":7081,"./si.js":7081,"./sk":8279,"./sk.js":8279,"./sl":8598,"./sl.js":8598,"./sq":65,"./sq.js":65,"./sr":1320,"./sr-cyrl":9591,"./sr-cyrl.js":9591,"./sr.js":1320,"./ss":5935,"./ss.js":5935,"./sv":2468,"./sv.js":2468,"./sw":411,"./sw.js":411,"./ta":3354,"./ta.js":3354,"./te":9926,"./te.js":9926,"./tet":4424,"./tet.js":4424,"./tg":2108,"./tg.js":2108,"./th":8577,"./th.js":8577,"./tk":2232,"./tk.js":2232,"./tl-ph":1494,"./tl-ph.js":1494,"./tlh":7353,"./tlh.js":7353,"./tr":8871,"./tr.js":8871,"./tzl":8363,"./tzl.js":8363,"./tzm":1364,"./tzm-latn":2268,"./tzm-latn.js":2268,"./tzm.js":1364,"./ug-cn":7279,"./ug-cn.js":7279,"./uk":6869,"./uk.js":6869,"./ur":4926,"./ur.js":4926,"./uz":8150,"./uz-latn":2670,"./uz-latn.js":2670,"./uz.js":8150,"./vi":9940,"./vi.js":9940,"./x-pseudo":6507,"./x-pseudo.js":6507,"./yo":7893,"./yo.js":7893,"./zh-cn":7849,"./zh-cn.js":7849,"./zh-hk":1381,"./zh-hk.js":1381,"./zh-mo":6440,"./zh-mo.js":6440,"./zh-tw":9613,"./zh-tw.js":9613};function n(e){var t=a(e);return s(t)}function a(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id=5358}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,a){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],a=e[u][2];for(var o=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,n,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,i=r[0],o=r[1],l=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var u=l(s)}for(t&&t(r);c<i.length;c++)a=i[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},r=self["webpackChunkweather_map_vue2"]=self["webpackChunkweather_map_vue2"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(3665)}));r=s.O(r)})();
//# sourceMappingURL=app.72ba0767.js.map